<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=chteh0fSOiSrmusp8u43YLibRAUGyvCIyNwOfYj8c_ZmJamvlVLpOJypMQ-_7uq9i73sHjr4v-TSpAv0Ey1aV_5Jgr8ufe5A6KahQF76Xmg');ol{margin:0;padding:0}table td,table th{padding:0}.c0{background-color:#b6d7a8;font-size:12pt;font-family:"Inconsolata";color:#666600}.c6{background-color:#ea9999;font-size:12pt;font-family:"Inconsolata";color:#666600}.c25{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:left}.c5{background-color:#f4cccc;font-size:12pt;font-family:"Inconsolata";color:#666600}.c11{background-color:#f4cccc;font-size:12pt;font-family:"Inconsolata";color:#000088}.c10{font-size:12pt;font-family:"Inconsolata";color:#660066}.c2{orphans:2;widows:2;height:11pt}.c8{font-size:12pt;font-family:"Inconsolata";color:#666600}.c22{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c1{page-break-after:avoid;orphans:2;widows:2}.c12{font-size:12pt;font-family:"Inconsolata";color:#880000}.c28{font-size:12pt;font-family:"Consolas";color:#000000}.c3{font-size:12pt;font-family:"Inconsolata";color:#000000}.c24{font-size:20pt;font-weight:700}.c13{font-size:12pt;font-family:"Inconsolata"}.c7{orphans:2;widows:2}.c17{background-color:#f4cccc}.c9{background-color:#d9ead3}.c16{background-color:#ea9999}.c15{font-family:"Open Sans"}.c29{font-size:20pt}.c18{color:#006666}.c26{font-weight:700}.c4{background-color:#b6d7a8}.c27{text-align:center}.c19{background-color:#cccccc}.c21{color:#008800}.c20{font-family:"Raleway"}.c23{font-family:"Inconsolata"}.c14{color:#000088}.title{padding-top:0pt;color:#000000;font-size:20pt;padding-bottom:3pt;font-family:"Raleway";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:center}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Raleway";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:center}li{color:#000000;font-size:11pt;font-family:"Open Sans"}p{margin:0;color:#000000;font-size:11pt;font-family:"Open Sans"}h1{padding-top:20pt;color:#000000;font-weight:700;font-size:20pt;padding-bottom:6pt;font-family:"Open Sans";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#666666;font-size:16pt;padding-bottom:6pt;font-family:"Open Sans";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-weight:700;font-size:14pt;padding-bottom:4pt;font-family:"Open Sans";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Open Sans";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Open Sans";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Open Sans";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c22"><p class="c1 c27 title" id="h.k8tc1nf22evw"><span class="c20 c29">Journey - </span><span class="c20 c24">Week 6</span></p><p class="c1 c27 subtitle" id="h.2yrwud10j03k"><span>Events / </span><span class="c20">Inputs</span></p><p class="c2"><span class="c15"></span></p><h1 class="c1" id="h.yseks1pbb3py"><span class="c15 c26">Review</span></h1><p class="c7"><span>Last week we implemented sprites into our bouncing balls game. We revisited surfaces and drawing our images to the screen by blitting. Then we briefly discussed .convert() and pixel format. Finally, we began using Sprite Groups to manage our list of Balls.</span></p><p class="c2"><span></span></p><p class="c7"><span>If your code isn&rsquo;t up-to-date, or you prefer starting with a fresh slate, here&rsquo;s the finished code from last week.</span></p><h3 class="c1" id="h.yflfqbx55rvk"><span>ball-sprite.py</span></h3><hr><p class="c2"><span></span></p><p class="c7"><span class="c13 c14">import</span><span class="c3">&nbsp;pygame</span><span class="c8">,</span><span class="c3">&nbsp;sys</span><span class="c8">,</span><span class="c3">&nbsp;math</span></p><p class="c7"><span class="c13 c14">from</span><span class="c3">&nbsp;pygame</span><span class="c8">.</span><span class="c3">locals </span><span class="c13 c14">import</span><span class="c3">&nbsp;*</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c3">pygame</span><span class="c8">.</span><span class="c3">init</span><span class="c8">()</span></p><p class="c7"><span class="c3">DISPLAYSURF </span><span class="c8">=</span><span class="c3">&nbsp;pygame</span><span class="c8">.</span><span class="c3">display</span><span class="c8">.</span><span class="c3">set_mode</span><span class="c8">((</span><span class="c13 c18">640</span><span class="c8">,</span><span class="c3">&nbsp;</span><span class="c13 c18">480</span><span class="c8">))</span></p><p class="c7"><span class="c3">pygame</span><span class="c8">.</span><span class="c3">display</span><span class="c8">.</span><span class="c3">set_caption</span><span class="c8">(</span><span class="c13 c21">&#39;Bouncing Balls&#39;)</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c12"># Set our color constants</span></p><p class="c7"><span class="c3">BLACK </span><span class="c8">=</span><span class="c3">&nbsp;</span><span class="c8">(</span><span class="c13 c18">0</span><span class="c8">,</span><span class="c3">&nbsp;</span><span class="c13 c18">0</span><span class="c8">,</span><span class="c3">&nbsp;</span><span class="c13 c18">0)</span></p><p class="c7"><span class="c3">WHITE </span><span class="c8">=</span><span class="c3">&nbsp;</span><span class="c8">(</span><span class="c13 c18">255</span><span class="c8">,</span><span class="c3">&nbsp;</span><span class="c13 c18">255</span><span class="c8">,</span><span class="c3">&nbsp;</span><span class="c13 c18">255)</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c12"># Set our target FPS and create our clock</span></p><p class="c7"><span class="c3">FPS </span><span class="c8">=</span><span class="c3">&nbsp;</span><span class="c13 c18">60</span></p><p class="c7"><span class="c3">clock </span><span class="c8">=</span><span class="c3">&nbsp;pygame</span><span class="c8">.</span><span class="c3">time</span><span class="c8">.</span><span class="c10">Clock</span><span class="c8">()</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c12"># Create the ball class</span></p><p class="c7"><span class="c13 c14">class</span><span class="c3">&nbsp;</span><span class="c10">Ball</span><span class="c8">(</span><span class="c3">pygame</span><span class="c8">.</span><span class="c3">sprite</span><span class="c8">.</span><span class="c10">Sprite</span><span class="c8">):</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c12"># This code gets executed as soon as we create a new instance</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c13 c14">def</span><span class="c3">&nbsp;__init__</span><span class="c8">(</span><span class="c13 c14">self</span><span class="c8">,</span><span class="c3">&nbsp;sprite</span><span class="c8">,</span><span class="c3">&nbsp;x</span><span class="c8">,</span><span class="c3">&nbsp;y</span><span class="c8">,</span><span class="c3">&nbsp;radius</span><span class="c8">,</span><span class="c3">&nbsp;speed</span><span class="c8">,</span><span class="c3">&nbsp;angle</span><span class="c8">=-</span><span class="c13 c18">45</span><span class="c8">):</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c12"># Initiate this sprite</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; pygame</span><span class="c8">.</span><span class="c3">sprite</span><span class="c8">.</span><span class="c10">Sprite</span><span class="c8">.</span><span class="c3">__init__</span><span class="c8">(</span><span class="c13 c14">self)</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c12"># Setup our sprite surface</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">image </span><span class="c8">=</span><span class="c3">&nbsp;pygame</span><span class="c8">.</span><span class="c3">image</span><span class="c8">.</span><span class="c3">load</span><span class="c8">(</span><span class="c13 c21">&#39;sprites/&#39;</span><span class="c3">&nbsp;</span><span class="c8">+</span><span class="c3">&nbsp;sprite</span><span class="c8">)</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">image </span><span class="c8">=</span><span class="c3">&nbsp;pygame</span><span class="c8">.</span><span class="c3">transform</span><span class="c8">.</span><span class="c3">smoothscale</span><span class="c8">(</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">image</span><span class="c8">,</span><span class="c3">&nbsp;</span><span class="c8">(</span><span class="c3">radius </span><span class="c8">*</span><span class="c3">&nbsp;</span><span class="c13 c18">2</span><span class="c8">,</span><span class="c3">&nbsp;radius </span><span class="c8">*</span><span class="c3">&nbsp;</span><span class="c13 c18">2</span><span class="c8">))</span></p><p class="c7"><span class="c28">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">image </span><span class="c8">=</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">image</span><span class="c8">.</span><span class="c3">convert_alpha</span><span class="c8">()</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c12"># Get our rectangle and set the position</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">rect </span><span class="c8">=</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">image</span><span class="c8">.</span><span class="c3">get_rect</span><span class="c8">()</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">rect</span><span class="c8">.</span><span class="c3">topleft </span><span class="c8">=</span><span class="c3">&nbsp;</span><span class="c8">(</span><span class="c3">x</span><span class="c8">,</span><span class="c3">&nbsp;y)</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c12"># Create our vector variables</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">speed </span><span class="c8">=</span><span class="c3">&nbsp;speed</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">angle </span><span class="c8">=</span><span class="c3">&nbsp;math</span><span class="c8">.</span><span class="c3">radians</span><span class="c8">(-</span><span class="c3">angle)</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c12"># Update our game state by moving and bouncing if needed</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c13 c14">def</span><span class="c3">&nbsp;update</span><span class="c8">(</span><span class="c13 c14">self</span><span class="c8">):</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; delta_x </span><span class="c8">=</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">speed</span><span class="c8">*</span><span class="c3">math</span><span class="c8">.</span><span class="c3">cos</span><span class="c8">(</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">angle)</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; delta_y </span><span class="c8">=</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">speed</span><span class="c8">*</span><span class="c3">math</span><span class="c8">.</span><span class="c3">sin</span><span class="c8">(</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">angle)</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">rect </span><span class="c8">=</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">rect</span><span class="c8">.</span><span class="c3">move</span><span class="c8">(</span><span class="c3">delta_x</span><span class="c8">,</span><span class="c3">&nbsp;delta_y)</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; hit_bounds </span><span class="c8">=</span><span class="c3">&nbsp;</span><span class="c13 c14">False</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">if</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">rect</span><span class="c8">.</span><span class="c3">right </span><span class="c8">&gt;=</span><span class="c3">&nbsp;DISPLAYSURF</span><span class="c8">.</span><span class="c3">get_width</span><span class="c8">()</span><span class="c3">&nbsp;</span><span class="c13 c14">or</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">rect</span><span class="c8">.</span><span class="c3">left </span><span class="c8">&lt;=</span><span class="c3">&nbsp;</span><span class="c13 c18">0:</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; hit_bounds </span><span class="c8">=</span><span class="c3">&nbsp;</span><span class="c13 c14">True</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">angle </span><span class="c8">=</span><span class="c3">&nbsp;math</span><span class="c8">.</span><span class="c3">pi </span><span class="c8">-</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">angle</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">if</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">rect</span><span class="c8">.</span><span class="c3">top </span><span class="c8">&lt;=</span><span class="c3">&nbsp;</span><span class="c13 c18">0</span><span class="c3">&nbsp;</span><span class="c13 c14">or</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">rect</span><span class="c8">.</span><span class="c3">bottom </span><span class="c8">&gt;=</span><span class="c3">&nbsp;DISPLAYSURF</span><span class="c8">.</span><span class="c3">get_height</span><span class="c8">():</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; hit_bounds </span><span class="c8">=</span><span class="c3">&nbsp;</span><span class="c13 c14">True</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">angle </span><span class="c8">=</span><span class="c3">&nbsp;</span><span class="c8">-</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">angle</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">for</span><span class="c3">&nbsp;ball </span><span class="c13 c14">in</span><span class="c3">&nbsp;ball_list:</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">if</span><span class="c3">&nbsp;</span><span class="c13 c14">not</span><span class="c3">&nbsp;hit_bounds </span><span class="c13 c14">and</span><span class="c3">&nbsp;</span><span class="c13 c14">not</span><span class="c3">&nbsp;ball </span><span class="c13 c14">is</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c3">&nbsp;</span><span class="c13 c14">and</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">rect</span><span class="c8">.</span><span class="c3">colliderect</span><span class="c8">(</span><span class="c3">ball</span><span class="c8">.</span><span class="c3">rect</span><span class="c8">):</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">angle </span><span class="c8">=</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">angle </span><span class="c8">-</span><span class="c3">&nbsp;math</span><span class="c8">.</span><span class="c3">pi</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">break</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c12"># Draw our ball to the screen</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c13 c14">def</span><span class="c3">&nbsp;draw</span><span class="c8">(</span><span class="c13 c14">self</span><span class="c8">):</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; DISPLAYSURF</span><span class="c8">.</span><span class="c3">blit</span><span class="c8">(</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">image</span><span class="c8">,</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">rect)</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c12"># Make our list variable</span></p><p class="c7"><span class="c3">ball_list </span><span class="c8">=</span><span class="c3">&nbsp;</span><span class="c8">[]</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c12"># Create a list of 10 Ball instances</span></p><p class="c7"><span class="c13 c14">for</span><span class="c3">&nbsp;i </span><span class="c13 c14">in</span><span class="c3">&nbsp;range</span><span class="c8">(</span><span class="c13 c18">10</span><span class="c8">):</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; ball_list</span><span class="c8">.</span><span class="c3">append</span><span class="c8">(</span><span class="c10">Ball</span><span class="c8">(</span><span class="c13 c21">&#39;ball.png&#39;</span><span class="c8">,</span><span class="c3">&nbsp;i </span><span class="c8">*</span><span class="c3">&nbsp;</span><span class="c13 c18">40</span><span class="c8">,</span><span class="c3">&nbsp;i </span><span class="c8">*</span><span class="c3">&nbsp;</span><span class="c13 c18">40</span><span class="c8">,</span><span class="c3">&nbsp;</span><span class="c13 c18">20</span><span class="c8">,</span><span class="c3">&nbsp;</span><span class="c13 c18">5</span><span class="c8">))</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c12"># Game loop</span></p><p class="c7"><span class="c13 c14">while</span><span class="c3">&nbsp;</span><span class="c13 c14">True:</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c12"># Handle events</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c13 c14">for</span><span class="c3">&nbsp;</span><span class="c13 c14">event</span><span class="c3">&nbsp;</span><span class="c13 c14">in</span><span class="c3">&nbsp;pygame</span><span class="c8">.</span><span class="c13 c14">event</span><span class="c8">.</span><span class="c13 c14">get</span><span class="c8">():</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">if</span><span class="c3">&nbsp;</span><span class="c13 c14">event</span><span class="c8">.</span><span class="c3">type </span><span class="c8">==</span><span class="c3">&nbsp;QUIT:</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pygame</span><span class="c8">.</span><span class="c3">quit</span><span class="c8">()</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sys</span><span class="c8">.</span><span class="c13 c14">exit</span><span class="c8">()</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c12"># Update game state</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c13 c14">for</span><span class="c3">&nbsp;ball </span><span class="c13 c14">in</span><span class="c3">&nbsp;ball_list:</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; ball</span><span class="c8">.</span><span class="c3">update</span><span class="c8">()</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c12"># Draw screen</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; DISPLAYSURF</span><span class="c8">.</span><span class="c3">fill</span><span class="c8">(</span><span class="c3">BLACK)</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c13 c14">for</span><span class="c3">&nbsp;ball </span><span class="c13 c14">in</span><span class="c3">&nbsp;ball_list:</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; ball</span><span class="c8">.</span><span class="c3">draw</span><span class="c8">()</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c3">&nbsp; &nbsp; pygame</span><span class="c8">.</span><span class="c3">display</span><span class="c8">.</span><span class="c3">update</span><span class="c8">()</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c12"># Only output our desired frame rate</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; clock</span><span class="c8">.</span><span class="c3">tick</span><span class="c8">(</span><span class="c3">FPS)</span></p><hr><p class="c2"><span></span></p><h1 class="c1" id="h.f7tu9vljiaqg"><span>Optimizations</span></h1><h2 class="c1" id="h.tq94p8v9195f"><span>Sprite groups</span></h2><p class="c7"><span>We briefly covered Sprite Groups last week. Previously, we were using ball_list to store all of our balls, check for collisions, update, and draw every frame. While this worked great for us, PyGame has a built-in feature that can do this for us with a couple added benefits.</span></p><p class="c2"><span></span></p><p class="c7"><span>One such benefit is the .clear() function. As explained last week, this will only re-draw the background on areas that have changed. Drawing to the screen is expense in terms of CPU usage, so this optimization should make our game run smoother.</span></p><p class="c2"><span></span></p><p class="c7"><span>Another small change we&rsquo;re going to make with our code is with the name &ldquo;ball_list&rdquo;. Up to this point, we&rsquo;ve only drawn balls to our game, so the name has been fitting. However, we&rsquo;re going to be adding other kinds of sprites today, so let&rsquo;s aptly name this variable &ldquo;sprites&rdquo; instead. Here are the code changes when using sprites in a Sprite Group.</span></p><h3 class="c1" id="h.78ug47jitbc7"><span>Exercise #1 - asteroids.py</span></h3><hr><p class="c2"><span></span></p><p class="c7"><span class="c12"># Update our game state by moving and bouncing if needed</span></p><p class="c7"><span class="c13 c14">def</span><span class="c3">&nbsp;update</span><span class="c8">(</span><span class="c13 c14">self</span><span class="c8">):</span></p><p class="c2"><span class="c8"></span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c13">...</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c3 c17">&nbsp; &nbsp; </span><span class="c11">for</span><span class="c3 c17">&nbsp;ball </span><span class="c11">in</span><span class="c3 c17">&nbsp;</span><span class="c3 c16">ball_list</span><span class="c3">:</span></p><p class="c7"><span class="c3 c9">&nbsp; &nbsp; </span><span class="c13 c9 c14">for</span><span class="c3 c9">&nbsp;ball </span><span class="c13 c9 c14">in</span><span class="c3 c9">&nbsp;</span><span class="c3 c4">sprites</span><span class="c3">:</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">if</span><span class="c3">&nbsp;</span><span class="c13 c14">not</span><span class="c3">&nbsp;hit_bounds </span><span class="c13 c14">and</span><span class="c3">&nbsp;</span><span class="c13 c14">not</span><span class="c3">&nbsp;ball </span><span class="c13 c14">is</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c3">&nbsp;</span><span class="c13 c14">and</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">rect</span><span class="c8">.</span><span class="c3">colliderect</span><span class="c8">(</span><span class="c3">ball</span><span class="c8">.</span><span class="c3">rect</span><span class="c8">):</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">angle </span><span class="c8">=</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">angle </span><span class="c8">-</span><span class="c3">&nbsp;math</span><span class="c8">.</span><span class="c3">pi</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">break</span></p><p class="c2"><span class="c12"></span></p><p class="c7"><span class="c13">...</span></p><p class="c2"><span class="c12"></span></p><p class="c7"><span class="c12"># Make our sprite group</span></p><p class="c7"><span class="c3 c16">ball_list </span><span class="c6">=</span><span class="c3 c16">&nbsp;</span><span class="c6">[]</span></p><p class="c7"><span class="c3 c4">sprites </span><span class="c0">=</span><span class="c3 c4">&nbsp;pygame</span><span class="c0">.</span><span class="c3 c4">sprite</span><span class="c0">.</span><span class="c10 c4">Group</span><span class="c0">()</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c12"># Create a list of 10 Ball instances</span></p><p class="c7"><span class="c13 c14">for</span><span class="c3">&nbsp;i </span><span class="c13 c14">in</span><span class="c3">&nbsp;range</span><span class="c8">(</span><span class="c13 c18">10</span><span class="c8">):</span></p><p class="c7"><span class="c3 c17">&nbsp; &nbsp; </span><span class="c3 c16">ball_list</span><span class="c6">.</span><span class="c3 c16">append</span><span class="c5">(</span><span class="c10 c17">Ball</span><span class="c5">(</span><span class="c13 c17 c21">&#39;ball.png&#39;</span><span class="c5">,</span><span class="c3 c17">&nbsp;i </span><span class="c5">*</span><span class="c3 c17">&nbsp;</span><span class="c13 c17 c18">40</span><span class="c5">,</span><span class="c3 c17">&nbsp;i </span><span class="c5">*</span><span class="c3 c17">&nbsp;</span><span class="c13 c17 c18">40</span><span class="c5">,</span><span class="c3 c17">&nbsp;</span><span class="c13 c17 c18">20</span><span class="c5">,</span><span class="c3 c17">&nbsp;</span><span class="c13 c17 c18">5</span><span class="c5">))</span></p><p class="c7"><span class="c3 c9">&nbsp; &nbsp; </span><span class="c3 c4">sprites</span><span class="c0">.</span><span class="c3 c4">add</span><span class="c8 c9">(</span><span class="c10 c9">Ball</span><span class="c8 c9">(</span><span class="c13 c9 c21">&#39;ball.png&#39;</span><span class="c8 c9">,</span><span class="c3 c9">&nbsp;i </span><span class="c8 c9">*</span><span class="c3 c9">&nbsp;</span><span class="c13 c9 c18">40</span><span class="c8 c9">,</span><span class="c3 c9">&nbsp;i </span><span class="c8 c9">*</span><span class="c3 c9">&nbsp;</span><span class="c13 c9 c18">40</span><span class="c8 c9">,</span><span class="c3 c9">&nbsp;</span><span class="c13 c9 c18">20</span><span class="c8 c9">,</span><span class="c3 c9">&nbsp;</span><span class="c13 c9 c18">5</span><span class="c8 c9">))</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c12"># Create our background surface</span></p><p class="c7"><span class="c3 c4">background </span><span class="c0">=</span><span class="c3 c4">&nbsp;pygame</span><span class="c0">.</span><span class="c3 c4">image</span><span class="c0">.</span><span class="c3 c4">load</span><span class="c0">(</span><span class="c13 c4 c21">&#39;sprites/&#39;</span><span class="c3 c4">&nbsp;</span><span class="c0">+</span><span class="c3 c4">&nbsp;</span><span class="c13 c4 c21">&#39;background.jpg&#39;</span><span class="c0">)</span></p><p class="c7"><span class="c3 c4">background </span><span class="c0">=</span><span class="c3 c4">&nbsp;pygame</span><span class="c0">.</span><span class="c3 c4">transform</span><span class="c0">.</span><span class="c3 c4">smoothscale</span><span class="c0">(</span><span class="c3 c4">background</span><span class="c0">,</span><span class="c3 c4">&nbsp;</span><span class="c0">(</span><span class="c3 c4">DISPLAYSURF</span><span class="c0">.</span><span class="c3 c4">get_width</span><span class="c0">(),</span><span class="c3 c4">&nbsp;DISPLAYSURF</span><span class="c0">.</span><span class="c3 c4">get_height</span><span class="c0">()))</span></p><p class="c7"><span class="c3 c4">background </span><span class="c0">=</span><span class="c3 c4">&nbsp;background</span><span class="c0">.</span><span class="c3 c4">convert</span><span class="c0">()</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c12"># Fill the entire window with background when the game starts</span></p><p class="c7"><span class="c3 c4">DISPLAYSURF</span><span class="c0">.</span><span class="c3 c4">blit</span><span class="c0">(</span><span class="c3 c4">background</span><span class="c0">,</span><span class="c3 c4">&nbsp;background</span><span class="c0">.</span><span class="c3 c4">get_rect</span><span class="c0">())</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c12"># Game loop</span></p><p class="c7"><span class="c13 c14">while</span><span class="c3">&nbsp;</span><span class="c13 c14">True:</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c12"># Handle events</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c13 c14">for</span><span class="c3">&nbsp;</span><span class="c13 c14">event</span><span class="c3">&nbsp;</span><span class="c13 c14">in</span><span class="c3">&nbsp;pygame</span><span class="c8">.</span><span class="c13 c14">event</span><span class="c8">.</span><span class="c13 c14">get</span><span class="c8">():</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">if</span><span class="c3">&nbsp;</span><span class="c13 c14">event</span><span class="c8">.</span><span class="c3">type </span><span class="c8">==</span><span class="c3">&nbsp;QUIT:</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pygame</span><span class="c8">.</span><span class="c3">quit</span><span class="c8">()</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sys</span><span class="c8">.</span><span class="c13 c14">exit</span><span class="c8">()</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c12"># Update game state</span></p><p class="c7"><span class="c3 c16">&nbsp; &nbsp; </span><span class="c13 c16 c14">for</span><span class="c3 c16">&nbsp;ball </span><span class="c13 c16 c14">in</span><span class="c3 c16">&nbsp;ball_list:</span></p><p class="c7"><span class="c3 c16">&nbsp; &nbsp; &nbsp; &nbsp; ball</span><span class="c6">.</span><span class="c3 c16">update</span><span class="c6">()</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; sprites</span><span class="c0">.</span><span class="c3 c4">update</span><span class="c0">()</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c12"># Draw screen</span></p><p class="c7"><span class="c3 c16">&nbsp; &nbsp; DISPLAYSURF</span><span class="c6">.</span><span class="c3 c16">fill</span><span class="c6">(</span><span class="c3 c16">BLACK)</span></p><p class="c2"><span class="c3 c16"></span></p><p class="c7"><span class="c3 c16">&nbsp; &nbsp; </span><span class="c13 c16 c14">for</span><span class="c3 c16">&nbsp;ball </span><span class="c13 c16 c14">in</span><span class="c3 c16">&nbsp;ball_list:</span></p><p class="c7"><span class="c3 c16">&nbsp; &nbsp; &nbsp; &nbsp; ball</span><span class="c6">.</span><span class="c3 c16">draw</span><span class="c6">()</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; sprites</span><span class="c0">.</span><span class="c3 c4">clear</span><span class="c0">(</span><span class="c3 c4">DISPLAYSURF</span><span class="c0">,</span><span class="c3 c4">&nbsp;background)</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; sprites</span><span class="c0">.</span><span class="c3 c4">draw</span><span class="c0">(</span><span class="c3 c4">DISPLAYSURF)</span></p><p class="c2"><span class="c13"></span></p><p class="c7"><span class="c3">&nbsp; &nbsp; pygame</span><span class="c8">.</span><span class="c3">display</span><span class="c8">.</span><span class="c3">update</span><span class="c8">()</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c12"># Only output our desired frame rate</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; clock</span><span class="c8">.</span><span class="c3">tick</span><span class="c8">(</span><span class="c3">FPS)</span></p><hr><p class="c2"><span></span></p><p class="c2"><span></span></p><p class="c7"><span>As you may notice, this change also allows us to use an image for the background. You can change the image to one of your choosing by replacing &ldquo;background.jpg&rdquo; with your image.</span></p><h2 class="c1" id="h.goepcapg085c"><span>Ball collisions</span></h2><p class="c7"><span>There&rsquo;s one more optimization we&rsquo;re going to make to our game. Currently, when checking for collisions with other balls, we loop through every sprite and check if it meets our requirements for a collision. To avoid the balls getting stuck on the edges of our game we have &ldquo;</span><span class="c13">if not hit_bounds</span><span>&rdquo;. While this statement is perfectly valid, it&rsquo;s not in the optimal location.</span></p><p class="c2"><span></span></p><p class="c7"><span>Right now, we&rsquo;re looping through every single ball and checking if hit_bounds is true. However, hit_bounds will always be the same regardless of what ball we&rsquo;re comparing against. This means if we have 100 balls in our game, we&rsquo;re checking the value 100 times when we only need to check it once. It may not majorly affect performance of our simple game, but little changes like this can lead to much smoother gameplay.</span></p><p class="c2"><span></span></p><p class="c7"><span>Since we&rsquo;re looking at our ball collision code, we can see that we say &ldquo;</span><span class="c13">for ball in sprites</span><span>&rdquo;. Just like before, the variable name &ldquo;ball&rdquo; isn&rsquo;t the most accurate here, since we&rsquo;ll be comparing against every sprite, not just ball sprites. We&rsquo;ll change every instance of &ldquo;ball&rdquo; to &ldquo;sprite&rdquo; for accuracy as well.</span></p><h3 class="c1" id="h.u728gcjf1o8l"><span>Exercise #2 - asteroids.py</span></h3><hr><p class="c2"><span class="c13 c14"></span></p><p class="c7"><span class="c13 c4 c14">if</span><span class="c3 c4">&nbsp;</span><span class="c13 c4 c14">not</span><span class="c3 c4">&nbsp;hit_bounds:</span></p><p class="c7"><span class="c3 c17">&nbsp; &nbsp; </span><span class="c11">for</span><span class="c3 c17">&nbsp;</span><span class="c3 c16">ball</span><span class="c3 c17">&nbsp;</span><span class="c11">in</span><span class="c3 c17">&nbsp;sprites:</span></p><p class="c7"><span class="c3 c9">&nbsp; &nbsp; </span><span class="c13 c9 c14">for</span><span class="c3 c9">&nbsp;</span><span class="c3 c4">sprite</span><span class="c3 c9">&nbsp;</span><span class="c13 c9 c14">in</span><span class="c3 c9">&nbsp;sprites:</span></p><p class="c7"><span class="c3 c17">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c11">if</span><span class="c3 c17">&nbsp;</span><span class="c13 c16 c14">not</span><span class="c3 c16">&nbsp;hit_bounds </span><span class="c11">and</span><span class="c3 c17">&nbsp;</span><span class="c11">not</span><span class="c3 c17">&nbsp;</span><span class="c3 c16">ball</span><span class="c3 c17">&nbsp;</span><span class="c11">is</span><span class="c3 c17">&nbsp;</span><span class="c11">self</span><span class="c3 c17">&nbsp;</span><span class="c11">and</span><span class="c3 c17">&nbsp;</span><span class="c11">self</span><span class="c5">.</span><span class="c3 c17">rect</span><span class="c5">.</span><span class="c3 c17">colliderect</span><span class="c5">(</span><span class="c3 c16">ball</span><span class="c5">.</span><span class="c3 c17">rect</span><span class="c5">):</span></p><p class="c7"><span class="c3 c9">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c9 c14">if</span><span class="c3 c9">&nbsp;</span><span class="c13 c9 c14">not</span><span class="c3 c9">&nbsp;</span><span class="c3 c4">sprite</span><span class="c3 c9">&nbsp;</span><span class="c13 c9 c14">is</span><span class="c3 c9">&nbsp;</span><span class="c13 c9 c14">self</span><span class="c3 c9">&nbsp;</span><span class="c13 c9 c14">and</span><span class="c3 c9">&nbsp;</span><span class="c13 c9 c14">self</span><span class="c8 c9">.</span><span class="c3 c9">rect</span><span class="c8 c9">.</span><span class="c3 c9">colliderect</span><span class="c8 c9">(</span><span class="c3 c4">sprite</span><span class="c8 c9">.</span><span class="c3 c9">rect</span><span class="c8 c9">):</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">angle </span><span class="c8">=</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">angle </span><span class="c8">-</span><span class="c3">&nbsp;math</span><span class="c8">.</span><span class="c3">pi</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">break</span></p><hr><p class="c2"><span></span></p><h1 class="c1" id="h.i5vjxrwvlhwi"><span>Inputs</span></h1><h2 class="c1" id="h.vq1m0biyw3km"><span>Events</span></h2><p class="c7"><span>Now that we&rsquo;ve made a couple optimizations to our game, let&rsquo;s add some more sprites. In particular, let&rsquo;s add some sprites that are user controlled. If you think about it, right now you have a very rudimentary game engine. You have a basic game loop, you&rsquo;re updating the game state, and you&rsquo;re drawing to the screen. The one thing we aren&rsquo;t doing is handling events.</span></p><p class="c2"><span></span></p><p class="c7"><span>We discussed events in week 1. Essentially, any type of user input that occurs in our game is considered an event. Anything from moving the mouse, pressing a key, or quitting our game. We already have an event loop that PyGame populates with events, so we&rsquo;ll just need to handle those events. Let&rsquo;s do just that.</span></p><h3 class="c1" id="h.fca0jpr7mjbo"><span>Exercise #3 - asteroids.py</span></h3><hr><p class="c2"><span></span></p><p class="c7"><span class="c12"># Set our target FPS and create our clock</span></p><p class="c7"><span class="c3">FPS </span><span class="c8">=</span><span class="c3">&nbsp;</span><span class="c13 c18">60</span></p><p class="c7"><span class="c3">clock </span><span class="c8">=</span><span class="c3">&nbsp;pygame</span><span class="c8">.</span><span class="c3">time</span><span class="c8">.</span><span class="c10">Clock</span><span class="c8">()</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c12"># Create our event variables</span></p><p class="c7"><span class="c3 c4">keys_down </span><span class="c0">=</span><span class="c3 c4">&nbsp;</span><span class="c0">[]</span></p><p class="c7"><span class="c3 c4">KEYDOWN </span><span class="c0">=</span><span class="c3 c4">&nbsp;2</span></p><p class="c7"><span class="c3 c4">KEYUP </span><span class="c0">=</span><span class="c3 c4">&nbsp;3</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c8">...</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c12"># Game loop</span></p><p class="c7"><span class="c13 c14">while</span><span class="c3">&nbsp;</span><span class="c13 c14">True:</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c12"># Handle events</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c13 c14">for</span><span class="c3">&nbsp;</span><span class="c13 c14">event</span><span class="c3">&nbsp;</span><span class="c13 c14">in</span><span class="c3">&nbsp;pygame</span><span class="c8">.</span><span class="c13 c14">event</span><span class="c8">.</span><span class="c13 c14">get</span><span class="c8">():</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">if</span><span class="c3">&nbsp;</span><span class="c13 c14">event</span><span class="c8">.</span><span class="c3">type </span><span class="c8">==</span><span class="c3">&nbsp;QUIT:</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pygame</span><span class="c8">.</span><span class="c3">quit</span><span class="c8">()</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sys</span><span class="c8">.</span><span class="c13 c14">exit</span><span class="c8">()</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c4 c14">if</span><span class="c3 c4">&nbsp;</span><span class="c13 c4 c14">event</span><span class="c0">.</span><span class="c3 c4">type </span><span class="c0">==</span><span class="c3 c4">&nbsp;KEYDOWN:</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c4 c14">if</span><span class="c3 c4">&nbsp;</span><span class="c13 c4 c14">not</span><span class="c3 c4">&nbsp;</span><span class="c13 c4 c14">event</span><span class="c0">.</span><span class="c3 c4">key </span><span class="c13 c4 c14">in</span><span class="c3 c4">&nbsp;keys_down:</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; keys_down</span><span class="c0">.</span><span class="c3 c4">append</span><span class="c0">(</span><span class="c13 c4 c14">event</span><span class="c0">.</span><span class="c3 c4">key)</span></p><p class="c2"><span class="c3 c4"></span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c4 c14">if</span><span class="c3 c4">&nbsp;</span><span class="c13 c4 c14">event</span><span class="c0">.</span><span class="c3 c4">type </span><span class="c0">==</span><span class="c3 c4">&nbsp;KEYUP:</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c4 c14">if</span><span class="c3 c4">&nbsp;</span><span class="c13 c4 c14">event</span><span class="c0">.</span><span class="c3 c4">key </span><span class="c13 c4 c14">in</span><span class="c3 c4">&nbsp;keys_down:</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; keys_down</span><span class="c0">.</span><span class="c3 c4">remove</span><span class="c0">(</span><span class="c13 c4 c14">event</span><span class="c0">.</span><span class="c3 c4">key)</span></p><p class="c2"><span class="c3 c4"></span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; </span><span class="c13 c4 c14">print</span><span class="c3 c4">&nbsp;keys_down</span></p><hr><p class="c2"><span></span></p><p class="c2"><span></span></p><p class="c7"><span>Here we first create a &ldquo;keys_down&rdquo; list. Much like how we created a &ldquo;ball_list&rdquo; to keep track of all the balls in our game, we&rsquo;ll use this &ldquo;keys_down&rdquo; list to keep track of every key that is currently pressed. On the next two lines, we create two constants. The event types in PyGame are denoted by a number. To make this a little easier to keep track of, we make two constants that equal the numbers of the KEYDOWN and KEYUP event types.</span></p><p class="c2"><span></span></p><p class="c7"><span>Further down, in the event loop, we have two new &ldquo;if&rdquo; blocks of code. The first checks if a key has been pressed, then adds it to our &ldquo;keys_down&rdquo; list if it is not already in the list. The second &ldquo;if&rdquo; checks if a key has been released and removes it from our list if it was present.</span></p><p class="c2"><span></span></p><p class="c25 c7"><span>Finally, we print out the &ldquo;keys_down&rdquo; list. Run your game and try pressing some keys. Watch your terminal or Python shell as you do this and take note of the numbers of the keys you&rsquo;d like to use for your controller. After playing around with the keys, go ahead and remove the </span><span class="c13 c16 c14">print</span><span class="c13 c16">&nbsp;keys_down</span><span>&nbsp;line.</span></p><h2 class="c1" id="h.15qjbxuqp27l"><span>Ship class</span></h2><p class="c7 c25"><span>Now that we have a list with every pressed key, we can use that information as a controller for our sprite. Here we&rsquo;ll make a Ship class, but you can use whatever sprite or class name you wish.</span></p><h3 class="c1" id="h.nkdj3qdtd7v"><span>Exercise #4 - asteroids.py</span></h3><hr><p class="c2"><span></span></p><p class="c7"><span class="c13 c4 c14">class</span><span class="c3 c4">&nbsp;</span><span class="c10 c4">Ship</span><span class="c0">(</span><span class="c3 c4">pygame</span><span class="c0">.</span><span class="c3 c4">sprite</span><span class="c0">.</span><span class="c10 c4">Sprite</span><span class="c0">):</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; </span><span class="c13 c4 c14">def</span><span class="c3 c4">&nbsp;__init__</span><span class="c0">(</span><span class="c13 c4 c14">self</span><span class="c0">,</span><span class="c3 c4">&nbsp;sprite</span><span class="c0">,</span><span class="c3 c4">&nbsp;x</span><span class="c0">,</span><span class="c3 c4">&nbsp;y</span><span class="c0">,</span><span class="c3 c4">&nbsp;width</span><span class="c0">,</span><span class="c3 c4">&nbsp;height</span><span class="c0">,</span><span class="c3 c4">&nbsp;speed</span><span class="c0">):</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c12 c4"># Initiate this sprite</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; pygame</span><span class="c0">.</span><span class="c3 c4">sprite</span><span class="c0">.</span><span class="c10 c4">Sprite</span><span class="c0">.</span><span class="c3 c4">__init__</span><span class="c0">(</span><span class="c13 c4 c14">self)</span></p><p class="c2"><span class="c3 c4"></span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c12 c4"># Set up our sprite surface</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c4 c14">self</span><span class="c0">.</span><span class="c3 c4">image </span><span class="c0">=</span><span class="c3 c4">&nbsp;pygame</span><span class="c0">.</span><span class="c3 c4">image</span><span class="c0">.</span><span class="c3 c4">load</span><span class="c0">(</span><span class="c13 c4 c21">&#39;sprites/&#39;</span><span class="c3 c4">&nbsp;</span><span class="c0">+</span><span class="c3 c4">&nbsp;sprite)</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c4 c14">self</span><span class="c0">.</span><span class="c3 c4">image </span><span class="c0">=</span><span class="c3 c4">&nbsp;pygame</span><span class="c0">.</span><span class="c3 c4">transform</span><span class="c0">.</span><span class="c3 c4">scale</span><span class="c0">(</span><span class="c13 c4 c14">self</span><span class="c0">.</span><span class="c3 c4">image</span><span class="c0">,</span><span class="c3 c4">&nbsp;</span><span class="c0">(</span><span class="c3 c4">width</span><span class="c0">,</span><span class="c3 c4">&nbsp;height</span><span class="c0">))</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c4 c14">self</span><span class="c0">.</span><span class="c3 c4">image </span><span class="c0">=</span><span class="c3 c4">&nbsp;</span><span class="c13 c4 c14">self</span><span class="c0">.</span><span class="c3 c4">image</span><span class="c0">.</span><span class="c3 c4">convert_alpha</span><span class="c0">()</span></p><p class="c2"><span class="c3 c4"></span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c12 c4"># Get our rectangle and set the position</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c4 c14">self</span><span class="c0">.</span><span class="c3 c4">rect </span><span class="c0">=</span><span class="c3 c4">&nbsp;</span><span class="c13 c4 c14">self</span><span class="c0">.</span><span class="c3 c4">image</span><span class="c0">.</span><span class="c3 c4">get_rect</span><span class="c0">()</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c4 c14">self</span><span class="c0">.</span><span class="c3 c4">rect</span><span class="c0">.</span><span class="c3 c4">topleft </span><span class="c0">=</span><span class="c3 c4">&nbsp;</span><span class="c0">(</span><span class="c3 c4">x</span><span class="c0">,</span><span class="c3 c4">&nbsp;y)</span></p><p class="c2"><span class="c3 c4"></span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c4 c14">self</span><span class="c0">.</span><span class="c3 c4">speed </span><span class="c0">=</span><span class="c3 c4">&nbsp;speed</span></p><p class="c2"><span class="c3 c4"></span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; </span><span class="c13 c4 c14">def</span><span class="c3 c4">&nbsp;update</span><span class="c0">(</span><span class="c13 c4 c14">self</span><span class="c0">):</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c12 c4"># If right arrow pressed</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c4 c14">if</span><span class="c3 c4">&nbsp;</span><span class="c13 c18 c4">275</span><span class="c3 c4">&nbsp;</span><span class="c13 c4 c14">in</span><span class="c3 c4">&nbsp;keys_down:</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c4 c14">self</span><span class="c0">.</span><span class="c3 c4">rect </span><span class="c0">=</span><span class="c3 c4">&nbsp;</span><span class="c13 c4 c14">self</span><span class="c0">.</span><span class="c3 c4">rect</span><span class="c0">.</span><span class="c3 c4">move</span><span class="c0">(</span><span class="c13 c4 c14">self</span><span class="c0">.</span><span class="c3 c4">speed</span><span class="c0">,</span><span class="c3 c4">&nbsp;</span><span class="c13 c18 c4">0)</span></p><p class="c2"><span class="c3 c4"></span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c12 c4"># If left arrow pressed</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c4 c14">if</span><span class="c3 c4">&nbsp;</span><span class="c13 c18 c4">276</span><span class="c3 c4">&nbsp;</span><span class="c13 c4 c14">in</span><span class="c3 c4">&nbsp;keys_down:</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c4 c14">self</span><span class="c0">.</span><span class="c3 c4">rect </span><span class="c0">=</span><span class="c3 c4">&nbsp;</span><span class="c13 c4 c14">self</span><span class="c0">.</span><span class="c3 c4">rect</span><span class="c0">.</span><span class="c3 c4">move</span><span class="c0">(-</span><span class="c13 c4 c14">self</span><span class="c0">.</span><span class="c3 c4">speed</span><span class="c0">,</span><span class="c3 c4">&nbsp;</span><span class="c13 c18 c4">0)</span></p><p class="c2"><span class="c3 c4"></span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; </span><span class="c12 c4"># Draw to the screen</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; </span><span class="c13 c4 c14">def</span><span class="c3 c4">&nbsp;draw</span><span class="c0">(</span><span class="c13 c4 c14">self</span><span class="c0">):</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; DISPLAYSURF</span><span class="c0">.</span><span class="c3 c4">blit</span><span class="c0">(</span><span class="c13 c4 c14">self</span><span class="c0">.</span><span class="c3 c4">image</span><span class="c0">,</span><span class="c3 c4">&nbsp;</span><span class="c13 c4 c14">self</span><span class="c0">.</span><span class="c3 c4">rect)</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c12"># Make our sprite group</span></p><p class="c7"><span class="c3">sprites </span><span class="c8">=</span><span class="c3">&nbsp;pygame</span><span class="c8">.</span><span class="c3">sprite</span><span class="c8">.</span><span class="c10">Group</span><span class="c8">()</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c12"># Create a list of 10 Ball instances</span></p><p class="c7"><span class="c13 c14">for</span><span class="c3">&nbsp;i </span><span class="c13 c14">in</span><span class="c3">&nbsp;range</span><span class="c8">(</span><span class="c13 c18">10</span><span class="c8">):</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; sprites</span><span class="c8">.</span><span class="c3">add</span><span class="c8">(</span><span class="c10">Ball</span><span class="c8">(</span><span class="c13 c21">&#39;ball.png&#39;</span><span class="c8">,</span><span class="c3">&nbsp;i </span><span class="c8">*</span><span class="c3">&nbsp;</span><span class="c13 c18">40</span><span class="c8">,</span><span class="c3">&nbsp;i </span><span class="c8">*</span><span class="c3">&nbsp;</span><span class="c13 c18">40</span><span class="c8">,</span><span class="c3">&nbsp;</span><span class="c13 c18">20</span><span class="c8">,</span><span class="c3">&nbsp;</span><span class="c13 c18">5</span><span class="c8">))</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c12"># Create our player paddle</span></p><p class="c7"><span class="c3 c4">sprites</span><span class="c0">.</span><span class="c3 c4">add</span><span class="c0">(</span><span class="c10 c4">Ship</span><span class="c0">(</span><span class="c13 c4 c21">&#39;ship.png&#39;</span><span class="c0">,</span><span class="c3 c4">&nbsp;</span><span class="c13 c18 c4">100</span><span class="c0">,</span><span class="c3 c4">&nbsp;</span><span class="c13 c18 c4">400</span><span class="c0">,</span><span class="c3 c4">&nbsp;</span><span class="c13 c18 c4">100</span><span class="c0">,</span><span class="c3 c4">&nbsp;</span><span class="c13 c18 c4">75</span><span class="c0">,</span><span class="c3 c4">&nbsp;</span><span class="c13 c18 c4">5</span><span class="c0">))</span></p><hr><p class="c2"><span></span></p><p class="c2"><span></span></p><p class="c7"><span>We start off our Ship class with code very similar to our Ball class. In a real game, we would make a Sprite class with all the code our sprites would share. Then we would use our Sprite class as a base class for all of our classes that use sprites. For our use case, duplicating this code suffices.</span></p><p class="c2"><span></span></p><p class="c7"><span>The update function is where things get interesting. Checking if a given key is pressed is almost trivial using our keys_down list. Right now we check if the left or right arrow keys are pressed and move to the left or right accordingly. You can change the key codes to whichever keys you prefer.</span></p><p class="c2"><span></span></p><p class="c7"><span>Then we have the draw function. The draw function is exactly the same as our ball class. We simply blit the sprite to the screen surface.</span></p><p class="c2"><span></span></p><p class="c7"><span>Finally, we add a new instance of the Ship to our Sprite Group. Since we are using this handy PyGame feature, we don&rsquo;t have to worry about updating or drawing the ship, as the Sprite Group will do this for us.</span></p><h1 class="c1" id="h.5rqgjbx32qpm"><span>Bullets</span></h1><p class="c7"><span>Our game is shaping up pretty well, but let&rsquo;s add the ability for our ship to shoot bullets and destroy the other balls. At that point we&rsquo;ll more or less have an asteroids game clone.</span></p><h2 class="c1" id="h.h3uflj8er05e"><span>Shooting</span></h2><p class="c7"><span>First we need to detect when the shoot button is press and shoot from our Ship class. We also want to shoot only once per key press. If we shoot every frame the key is down, like we do with moving, then all of our bullets will get stuck in each other. To prevent that, we&rsquo;ll set an isShooting variable that will equal True when we are shooting and False when we aren&rsquo;t.</span></p><h3 class="c1" id="h.7hfpkkf4qcbk"><span>Exercise #5 - asteroids.py</span></h3><hr><p class="c2"><span></span></p><p class="c7"><span class="c13 c14">class</span><span class="c3">&nbsp;</span><span class="c10">Ship</span><span class="c8">(</span><span class="c3">pygame</span><span class="c8">.</span><span class="c3">sprite</span><span class="c8">.</span><span class="c10">Sprite</span><span class="c8">):</span></p><p class="c2"><span class="c13"></span></p><p class="c7"><span class="c13">...</span></p><p class="c2"><span class="c13"></span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">speed </span><span class="c8">=</span><span class="c3">&nbsp;speed</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; </span><span class="c13 c4 c14">self</span><span class="c0">.</span><span class="c3 c4">isShooting </span><span class="c0">=</span><span class="c3 c4">&nbsp;</span><span class="c13 c4 c14">False</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c13 c14">def</span><span class="c3">&nbsp;update</span><span class="c8">(</span><span class="c13 c14">self</span><span class="c8">):</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c12"># If right arrow pressed</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c13 c14">if</span><span class="c3">&nbsp;</span><span class="c13 c18">275</span><span class="c3">&nbsp;</span><span class="c13 c14">in</span><span class="c3">&nbsp;keys_down:</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">rect </span><span class="c8">=</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">rect</span><span class="c8">.</span><span class="c3">move</span><span class="c8">(</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">speed</span><span class="c8">,</span><span class="c3">&nbsp;</span><span class="c13 c18">0)</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c12"># If left arrow pressed</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c13 c14">if</span><span class="c3">&nbsp;</span><span class="c13 c18">276</span><span class="c3">&nbsp;</span><span class="c13 c14">in</span><span class="c3">&nbsp;keys_down:</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">rect </span><span class="c8">=</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">rect</span><span class="c8">.</span><span class="c3">move</span><span class="c8">(-</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">speed</span><span class="c8">,</span><span class="c3">&nbsp;</span><span class="c13 c18">0)</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c12"># If spacebar pressed</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; </span><span class="c13 c4 c14">if</span><span class="c3 c4">&nbsp;</span><span class="c13 c4 c18">32</span><span class="c3 c4">&nbsp;</span><span class="c13 c4 c14">in</span><span class="c3 c4">&nbsp;keys_down:</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c4 c14">if</span><span class="c3 c4">&nbsp;</span><span class="c13 c4 c14">not</span><span class="c3 c4">&nbsp;</span><span class="c13 c4 c14">self</span><span class="c0">.</span><span class="c3 c4">isShooting:</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c4 c14">self</span><span class="c0">.</span><span class="c3 c4">isShooting </span><span class="c0">=</span><span class="c3 c4">&nbsp;</span><span class="c13 c4 c14">True</span></p><p class="c2"><span class="c3 c4"></span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; x</span><span class="c0">,</span><span class="c3 c4">&nbsp;y </span><span class="c0">=</span><span class="c3 c4">&nbsp;</span><span class="c13 c4 c14">self</span><span class="c0">.</span><span class="c3 c4">rect</span><span class="c0">.</span><span class="c3 c4">midtop</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sprites</span><span class="c0">.</span><span class="c3 c4">add</span><span class="c0">(</span><span class="c10 c4">Bullet</span><span class="c0">(</span><span class="c3 c4">x</span><span class="c0">,</span><span class="c3 c4">&nbsp;y</span><span class="c0">))</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; </span><span class="c13 c4 c14">else:</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c4 c14">self</span><span class="c0">.</span><span class="c3 c4">isShooting </span><span class="c0">=</span><span class="c3 c4">&nbsp;</span><span class="c13 c4 c14">False</span></p><hr><p class="c2"><span></span></p><p class="c2"><span></span></p><p class="c7"><span>That&rsquo;s all the logic we need to add to our Ship class, but now we actually need to create the Bullet class. Before we do though, we&rsquo;re going to alter our Ball class so that we can re-use most of the code contained in it. Since our bullet is going to be a ball after all, a good portion of the code will be identical. Let&rsquo;s go ahead and make those changes to our Ball class.</span></p><h3 class="c1" id="h.haa9qa3lh0e5"><span>Exercise #6 - asteroids.py</span></h3><hr><p class="c2"><span></span></p><p class="c7"><span class="c12"># Create the ball class</span></p><p class="c7"><span class="c13 c14">class</span><span class="c3">&nbsp;</span><span class="c10">Ball</span><span class="c8">(</span><span class="c3">pygame</span><span class="c8">.</span><span class="c3">sprite</span><span class="c8">.</span><span class="c10">Sprite</span><span class="c8">):</span></p><p class="c2"><span class="c12"></span></p><p class="c7"><span class="c13">...</span></p><p class="c2"><span class="c12"></span></p><p class="c7"><span class="c12"># Update our game state by moving and bouncing if needed</span></p><p class="c7"><span class="c13 c14">def</span><span class="c3">&nbsp;update</span><span class="c8">(</span><span class="c13 c14">self</span><span class="c8">):</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; delta_x </span><span class="c8">=</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">speed</span><span class="c8">*</span><span class="c3">math</span><span class="c8">.</span><span class="c3">cos</span><span class="c8">(</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">angle)</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; delta_y </span><span class="c8">=</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">speed</span><span class="c8">*</span><span class="c3">math</span><span class="c8">.</span><span class="c3">sin</span><span class="c8">(</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">angle)</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">rect </span><span class="c8">=</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">rect</span><span class="c8">.</span><span class="c3">move</span><span class="c8">(</span><span class="c3">delta_x</span><span class="c8">,</span><span class="c3">&nbsp;delta_y)</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; hit_bounds </span><span class="c8">=</span><span class="c3">&nbsp;</span><span class="c13 c14">False</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; hit_ball </span><span class="c0">=</span><span class="c3 c4">&nbsp;</span><span class="c13 c4 c14">None</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c13 c14">if</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">rect</span><span class="c8">.</span><span class="c3">right </span><span class="c8">&gt;=</span><span class="c3">&nbsp;DISPLAYSURF</span><span class="c8">.</span><span class="c3">get_width</span><span class="c8">()</span><span class="c3">&nbsp;</span><span class="c13 c14">or</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">rect</span><span class="c8">.</span><span class="c3">left </span><span class="c8">&lt;=</span><span class="c3">&nbsp;</span><span class="c13 c18">0:</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; hit_bounds </span><span class="c8">=</span><span class="c3">&nbsp;</span><span class="c13 c14">True</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">angle </span><span class="c8">=</span><span class="c3">&nbsp;math</span><span class="c8">.</span><span class="c3">pi </span><span class="c8">-</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">angle</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c13 c14">if</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">rect</span><span class="c8">.</span><span class="c3">top </span><span class="c8">&lt;=</span><span class="c3">&nbsp;</span><span class="c13 c18">0</span><span class="c3">&nbsp;</span><span class="c13 c14">or</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">rect</span><span class="c8">.</span><span class="c3">bottom </span><span class="c8">&gt;=</span><span class="c3">&nbsp;DISPLAYSURF</span><span class="c8">.</span><span class="c3">get_height</span><span class="c8">():</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; hit_bounds </span><span class="c8">=</span><span class="c3">&nbsp;</span><span class="c13 c14">True</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">angle </span><span class="c8">=</span><span class="c3">&nbsp;</span><span class="c8">-</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">angle</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c13 c14">if</span><span class="c3">&nbsp;</span><span class="c13 c14">not</span><span class="c3">&nbsp;hit_bounds:</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">for</span><span class="c3">&nbsp;sprite </span><span class="c13 c14">in</span><span class="c3">&nbsp;sprites:</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">if</span><span class="c3">&nbsp;</span><span class="c13 c14">not</span><span class="c3">&nbsp;sprite </span><span class="c13 c14">is</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c3">&nbsp;</span><span class="c13 c14">and</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">rect</span><span class="c8">.</span><span class="c3">colliderect</span><span class="c8">(</span><span class="c3">sprite</span><span class="c8">.</span><span class="c3">rect</span><span class="c8">):</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c4 c14">if</span><span class="c3 c4">&nbsp;isinstance</span><span class="c0">(</span><span class="c3 c4">sprite</span><span class="c0">,</span><span class="c3 c4">&nbsp;</span><span class="c10 c4">Ball</span><span class="c0">):</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">angle </span><span class="c8">=</span><span class="c3">&nbsp;</span><span class="c13 c14">self</span><span class="c8">.</span><span class="c3">angle </span><span class="c8">-</span><span class="c3">&nbsp;math</span><span class="c8">.</span><span class="c3">pi</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; hit_ball </span><span class="c0">=</span><span class="c3 c4">&nbsp;sprite</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c14">break</span></p><p class="c2"><span class="c3"></span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; </span><span class="c13 c4 c14">return</span><span class="c3 c4">&nbsp;hit_bounds</span><span class="c0">,</span><span class="c3 c4">&nbsp;hit_ball</span></p><hr><p class="c2"><span></span></p><p class="c2"><span></span></p><p class="c7"><span>First, we added a &ldquo;hit_ball&rdquo; variable which we initially set to &ldquo;None&rdquo;. Then we add an if statement to our collision check. Since we&rsquo;ll now have a Ship in our game, we don&rsquo;t want our bullets or balls bouncing off the Ship. Next, if there is a collision, we set hit_ball equal to the sprite that was hit. Finally, we &ldquo;return&rdquo; the hit_bounds and hit_ball variables. This return statement won&rsquo;t change anything unless we explicitly get the return value from the update function, which we&rsquo;ll do in our Bullet class.</span></p><p class="c2"><span></span></p><p class="c7"><span>Now that&rsquo;s taken care of, let&rsquo;s finally create our Bullet class.</span></p><h3 class="c1" id="h.xhq122a8jzxu"><span>Exercise #7 - asteroids.py</span></h3><hr><p class="c2"><span></span></p><p class="c7"><span class="c13 c4 c14">class</span><span class="c3 c4">&nbsp;</span><span class="c10 c4">Bullet</span><span class="c0">(</span><span class="c10 c4">Ball</span><span class="c0">):</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; </span><span class="c13 c4 c14">def</span><span class="c3 c4">&nbsp;__init__</span><span class="c0">(</span><span class="c13 c4 c14">self</span><span class="c0">,</span><span class="c3 c4">&nbsp;x</span><span class="c0">,</span><span class="c3 c4">&nbsp;y</span><span class="c0">,</span><span class="c3 c4">&nbsp;radius</span><span class="c0">=</span><span class="c13 c18 c4">7</span><span class="c0">,</span><span class="c3 c4">&nbsp;speed</span><span class="c0">=</span><span class="c13 c18 c4">10</span><span class="c0">,</span><span class="c3 c4">&nbsp;angle</span><span class="c0">=</span><span class="c13 c18 c4">90</span><span class="c0">):</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c12 c4"># Initiate this ball</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c10 c4">Ball</span><span class="c0">.</span><span class="c3 c4">__init__</span><span class="c0">(</span><span class="c13 c4 c14">self</span><span class="c0">,</span><span class="c3 c4">&nbsp;</span><span class="c13 c4 c21">&#39;bullet.png&#39;</span><span class="c0">,</span><span class="c3 c4">&nbsp;x</span><span class="c0">,</span><span class="c3 c4">&nbsp;y</span><span class="c0">,</span><span class="c3 c4">&nbsp;radius</span><span class="c0">,</span><span class="c3 c4">&nbsp;speed</span><span class="c0">,</span><span class="c3 c4">&nbsp;angle)</span></p><p class="c2"><span class="c3 c4"></span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c4 c14">self</span><span class="c0">.</span><span class="c3 c4">rect</span><span class="c0">.</span><span class="c3 c4">midtop </span><span class="c0">=</span><span class="c3 c4">&nbsp;x</span><span class="c0">,</span><span class="c3 c4">&nbsp;y</span></p><p class="c2"><span class="c3 c4"></span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; </span><span class="c13 c4 c14">def</span><span class="c3 c4">&nbsp;update</span><span class="c0">(</span><span class="c13 c4 c14">self</span><span class="c0">):</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; hit_bounds</span><span class="c0">,</span><span class="c3 c4">&nbsp;hit_ball </span><span class="c0">=</span><span class="c3 c4">&nbsp;</span><span class="c10 c4">Ball</span><span class="c0">.</span><span class="c3 c4">update</span><span class="c0">(</span><span class="c13 c4 c14">self)</span></p><p class="c2"><span class="c3 c4"></span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c4 c14">if</span><span class="c3 c4">&nbsp;hit_ball:</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sprites</span><span class="c0">.</span><span class="c3 c4">remove</span><span class="c0">(</span><span class="c13 c4 c14">self</span><span class="c0">,</span><span class="c3 c4">&nbsp;hit_ball)</span></p><p class="c2"><span class="c3 c4"></span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c13 c4 c14">if</span><span class="c3 c4">&nbsp;hit_bounds:</span></p><p class="c7"><span class="c3 c4">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sprites</span><span class="c0">.</span><span class="c3 c4">remove</span><span class="c0">(</span><span class="c13 c4 c14">self)</span></p><p class="c2"><span class="c13 c14"></span></p><p class="c7"><span class="c13 c14">class</span><span class="c3">&nbsp;</span><span class="c10">Ship</span><span class="c8">(</span><span class="c3">pygame</span><span class="c8">.</span><span class="c3">sprite</span><span class="c8">.</span><span class="c10">Sprite</span><span class="c8">):</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; </span><span class="c13 c14">def</span><span class="c3">&nbsp;__init__</span><span class="c8">(</span><span class="c13 c14">self</span><span class="c8">,</span><span class="c3">&nbsp;sprite</span><span class="c8">,</span><span class="c3">&nbsp;x</span><span class="c8">,</span><span class="c3">&nbsp;y</span><span class="c8">,</span><span class="c3">&nbsp;width</span><span class="c8">,</span><span class="c3">&nbsp;height</span><span class="c8">,</span><span class="c3">&nbsp;speed</span><span class="c8">):</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="c12"># Initiate this sprite</span></p><p class="c7"><span class="c3">&nbsp; &nbsp; &nbsp; &nbsp; pygame</span><span class="c8">.</span><span class="c3">sprite</span><span class="c8">.</span><span class="c10">Sprite</span><span class="c8">.</span><span class="c3">__init__</span><span class="c8">(</span><span class="c13 c14">self)</span></p><hr><p class="c2"><span></span></p><p class="c2"><span></span></p><p class="c7"><span>You can see that our bullet class is based on our Ball class instead of a Sprite directly. This allows us to re-use all of the code we&rsquo;ve already written, which greatly minimizes the size of the Bullet class. In fact, the only thing we do in init is set the position of our Bullet so that it&rsquo;s centered. </span></p><p class="c2"><span></span></p><p class="c7"><span>In our new update function, we call the Ball update function and set the two variables it returns. Then we check if the bullet has collided with another ball. If it has, we destroy both the bullet and the ball. Finally, we check if the bullet has gone out of bounds and remove it if so.</span></p><p class="c2"><span></span></p><p class="c7"><span>Congratulations, you just extended your bouncing ball code into a fully working asteroids game! There are a lot of parameters you can change from here. Try making your bullets smaller to make it harder to hit the balls. Make your bullets travel faster, or randomize the sprite.</span></p><h1 class="c1" id="h.7sa6hzex3gs2"><span>Challenge Problem</span></h1><p class="c7"><span>Try adding some sort of scoring system to your game. There&rsquo;s a few ways you could do this:</span></p><p class="c2"><span></span></p><p class="c7"><span>You can play a sound when a ball is hit by a bullet.</span></p><p class="c2"><span></span></p><p class="c7"><span>You could keep track of how many balls have been hit and print this number out.</span></p><p class="c2"><span></span></p><p class="c7"><span>If you keep track of how many balls have been hit, you can create more balls when all are destroyed. And change the background as well. This could be thought of as advancing to the next level.</span></p></body></html>